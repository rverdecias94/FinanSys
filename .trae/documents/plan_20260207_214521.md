Propongo implementar el rediseño completo del módulo Almacén siguiendo la especificación generada.

1. **Base de Datos (SQL)**

   * Crear archivo de migración `supabase/migrations/20250207_update_almacen.sql`.

   * Añadir columna `min_stock` a tabla `products`.

   * Crear tabla `product_categories` e insertar categorías base.

   * Asegurar columnas en `movements` (`user_id`, `created_at`).

2. **Servicios (Frontend Service)**

   * Actualizar `src/services/almacen.js`:

     * `listProducts`: Incluir `min_stock`.

     * `getProductCategories`: Nuevo método.

     * `getAlmacenStats`: Nuevo método para el Dashboard.

     * `listMovements`: Nuevo método con filtros y paginación.

     * `deleteProduct`, `updateProduct`: Nuevos métodos CRUD.

3. **Componentes UI**

   * Crear componentes modulares en `src/components/almacen/`:

     * `AlmacenDashboard.jsx`: KPIs y Gráficos.

     * `ProductList.jsx`: Tabla con indicadores de alerta y acciones.

     * `MovementList.jsx`: Historial de movimientos.

     * `ProductForm.jsx`: Modal para crear/editar.

     * `MovementForm.jsx`: Modal de registro.

4. **Página Principal**

   * Refactorizar `src/pages/Almacen.jsx` para usar el layout de Pestañas (`Tabs`) e integrar los nuevos componentes.

